{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Set of useful tips for developers who are using bash, git, mysql, etc. Mkdocs pip install mkdocs - install mkdocs ( more info ) pip install mkdocs-material - install material theme ( more info ) mkdocs serve - start HTTP server mkdocs gh-deploy - deploy to github pages Markdown Cheatsheet","title":"Home"},{"location":"#mkdocs","text":"pip install mkdocs - install mkdocs ( more info ) pip install mkdocs-material - install material theme ( more info ) mkdocs serve - start HTTP server mkdocs gh-deploy - deploy to github pages Markdown Cheatsheet","title":"Mkdocs"},{"location":"composer/","text":"Add a custom packages repository composer config --global repositories.example composer https://packages.example.com/ Install composer package from a local folder mkdir -p ~/composer-packages/ cp vendor-module-x.x.x.zip ~/composer-packages/ cd ~/public_html/ composer config repositories.local artifact ~/composer-packages/ composer require vendor/module #or composer update vendor/module","title":"Composer"},{"location":"composer/#add-a-custom-packages-repository","text":"composer config --global repositories.example composer https://packages.example.com/","title":"Add a custom packages repository"},{"location":"composer/#install-composer-package-from-a-local-folder","text":"mkdir -p ~/composer-packages/ cp vendor-module-x.x.x.zip ~/composer-packages/ cd ~/public_html/ composer config repositories.local artifact ~/composer-packages/ composer require vendor/module #or composer update vendor/module","title":"Install composer package from a local folder"},{"location":"disk/","text":"write iso to disk dd if = os.img of = /dev/sdX bs = 1M status = progress oflag = dsync where - oflag=dsync - synchronize I/O for data. RAM disk sudo mount -o size = 2G -t tmpfs none my.project.com Create Windows USB flash 1) Install WoeUSB: https://github.com/WoeUSB/WoeUSB 2) Unmount flash drive using Disks program 3) Write ISO 4) Reboot and install Windows ACL Full access for two users setfacl -R -d -m u:user1:rwx,u:user2:rwx . setfacl -R -m u:user1:rwx,u:user2:rwx . Check read-only file systems grep \"[[:space:]]ro[[:space:],]\" /proc/mounts Source: serverfault.com","title":"Disk"},{"location":"disk/#write-iso-to-disk","text":"dd if = os.img of = /dev/sdX bs = 1M status = progress oflag = dsync where - oflag=dsync - synchronize I/O for data.","title":"write iso to disk"},{"location":"disk/#ram-disk","text":"sudo mount -o size = 2G -t tmpfs none my.project.com","title":"RAM disk"},{"location":"disk/#create-windows-usb-flash","text":"1) Install WoeUSB: https://github.com/WoeUSB/WoeUSB 2) Unmount flash drive using Disks program 3) Write ISO 4) Reboot and install Windows","title":"Create Windows USB flash"},{"location":"disk/#acl","text":"","title":"ACL"},{"location":"disk/#full-access-for-two-users","text":"setfacl -R -d -m u:user1:rwx,u:user2:rwx . setfacl -R -m u:user1:rwx,u:user2:rwx .","title":"Full access for two users"},{"location":"disk/#check-read-only-file-systems","text":"grep \"[[:space:]]ro[[:space:],]\" /proc/mounts Source: serverfault.com","title":"Check read-only file systems"},{"location":"docker/","text":"Misc Remove all images except phpmyadmin docker image rm -f $( docker image ls -a | grep -v phpmyadmin | awk '{print $3}' | tail -n +2 )","title":"Docker"},{"location":"docker/#misc","text":"","title":"Misc"},{"location":"docker/#remove-all-images-except-phpmyadmin","text":"docker image rm -f $( docker image ls -a | grep -v phpmyadmin | awk '{print $3}' | tail -n +2 )","title":"Remove all images except phpmyadmin"},{"location":"docs/","text":"convert epub to kindle sudo apt-get install calibre ebook-convert file.epub file.mobi","title":"Docs"},{"location":"docs/#convert-epub-to-kindle","text":"sudo apt-get install calibre ebook-convert file.epub file.mobi","title":"convert epub to kindle"},{"location":"gnome/","text":"Shortcuts gsettings set org.gnome.desktop.wm.keybindings switch-applications \"['<Super>Tab']\" # don't group windows on Alt+Tab gsettings set org.gnome.desktop.wm.keybindings switch-windows \"['<Alt>Tab']\" # don't group windows on Alt+Tab gsettings set org.gnome.desktop.wm.keybindings begin-move '[]' # release Alt+F7 shortcut for PhpStorm gsettings list-recursively org.gnome.desktop.wm.keybindings | grep -F '<Alt>F7' # find specific shortcut Default GUI text editor Find the text/plain=gedit.desktop text in the one of the following files: vi ~/.local/share/applications/mimeapps.list # local user sudo vi /usr/share/applications/defaults.list # all users sudo vi /etc/gnome/defaults.list # defaults and replace to text/plain=sublime_text.desktop Default Console Text Editor sudo update-alternatives --config editor Other Make notify-send work from user cron file in ubuntu","title":"Gnome"},{"location":"gnome/#shortcuts","text":"gsettings set org.gnome.desktop.wm.keybindings switch-applications \"['<Super>Tab']\" # don't group windows on Alt+Tab gsettings set org.gnome.desktop.wm.keybindings switch-windows \"['<Alt>Tab']\" # don't group windows on Alt+Tab gsettings set org.gnome.desktop.wm.keybindings begin-move '[]' # release Alt+F7 shortcut for PhpStorm gsettings list-recursively org.gnome.desktop.wm.keybindings | grep -F '<Alt>F7' # find specific shortcut","title":"Shortcuts"},{"location":"gnome/#default-gui-text-editor","text":"Find the text/plain=gedit.desktop text in the one of the following files: vi ~/.local/share/applications/mimeapps.list # local user sudo vi /usr/share/applications/defaults.list # all users sudo vi /etc/gnome/defaults.list # defaults and replace to text/plain=sublime_text.desktop","title":"Default GUI text editor"},{"location":"gnome/#default-console-text-editor","text":"sudo update-alternatives --config editor","title":"Default Console Text Editor"},{"location":"gnome/#other","text":"Make notify-send work from user cron file in ubuntu","title":"Other"},{"location":"htaccess/","text":"Disable Browser Cache for specific folder Place the following line into .htaccess: Header set Cache-Control \"no-store\" \"expr=%{REQUEST_URI}=~/(VendorName1|VendorName2|requirejs-config\\.js)/i\" As result url with \"VendorName\" in path will get Pragma \"no-cache\" http header, so browser won't cache it. This trick is very useful for magento developers who are working with js components or html templates and want to disable cache for a certain folder only. Basic Auth with URL exception Access /dir/subdir/file.txt file without authorization SetEnvIf Request_URI \"dir\\/subdir\\/file\\.txt$\" no_auth AuthType Basic AuthUserFile /home/user/public_html/.htpasswd AuthName \"Restricted Area\" Require valid-user Order allow,deny Allow from env=no_auth Satisfy any Define base path as environment variable for further usage RewriteCond %{REQUEST_URI}::$1 ^(/.+)/(.*)::\\2$ RewriteRule ^(.*) - [E=BASE:%1] RewriteRule ^(.*)$ %{ENV:BASE}/index.php [L]","title":"Htaccess"},{"location":"htaccess/#disable-browser-cache-for-specific-folder","text":"Place the following line into .htaccess: Header set Cache-Control \"no-store\" \"expr=%{REQUEST_URI}=~/(VendorName1|VendorName2|requirejs-config\\.js)/i\" As result url with \"VendorName\" in path will get Pragma \"no-cache\" http header, so browser won't cache it. This trick is very useful for magento developers who are working with js components or html templates and want to disable cache for a certain folder only.","title":"Disable Browser Cache for specific folder"},{"location":"htaccess/#basic-auth-with-url-exception","text":"Access /dir/subdir/file.txt file without authorization SetEnvIf Request_URI \"dir\\/subdir\\/file\\.txt$\" no_auth AuthType Basic AuthUserFile /home/user/public_html/.htpasswd AuthName \"Restricted Area\" Require valid-user Order allow,deny Allow from env=no_auth Satisfy any","title":"Basic Auth with URL exception"},{"location":"htaccess/#define-base-path-as-environment-variable-for-further-usage","text":"RewriteCond %{REQUEST_URI}::$1 ^(/.+)/(.*)::\\2$ RewriteRule ^(.*) - [E=BASE:%1] RewriteRule ^(.*)$ %{ENV:BASE}/index.php [L]","title":"Define base path as environment variable for further usage"},{"location":"http2/","text":"Check HTTP2 support curl --http2 -vI https://http1.golang.org/ 2>&1 | grep ALPN * ALPN, offering h2 * ALPN, offering http/1.1 * ALPN, server did not agree to a protocol curl --http2 -vI https://http2.golang.org/ 2>&1 | grep ALPN * ALPN, offering h2 * ALPN, offering http/1.1 * ALPN, server accepted to use h2 httpd.conf Protocols h2 http/1.1","title":"Http2"},{"location":"http2/#check-http2-support","text":"curl --http2 -vI https://http1.golang.org/ 2>&1 | grep ALPN * ALPN, offering h2 * ALPN, offering http/1.1 * ALPN, server did not agree to a protocol curl --http2 -vI https://http2.golang.org/ 2>&1 | grep ALPN * ALPN, offering h2 * ALPN, offering http/1.1 * ALPN, server accepted to use h2","title":"Check HTTP2 support"},{"location":"http2/#httpdconf","text":"Protocols h2 http/1.1","title":"httpd.conf"},{"location":"images/","text":"Remove EXIF mogrify -strip *.jpg","title":"Images"},{"location":"images/#remove-exif","text":"mogrify -strip *.jpg","title":"Remove EXIF"},{"location":"magento1/","text":"Setup Dynamic Base URL INSERT INTO core_config_data ( ` path ` , ` value ` ) VALUES ( 'web/url/use_store' , 1 ), ( 'web/unsecure/base_url' , '{{base_url}}' ), ( 'web/secure/base_url' , '{{base_url}}' ), ( 'web/unsecure/base_link_url' , '{{unsecure_base_url}}' ), ( 'web/unsecure/base_skin_url' , '{{unsecure_base_url}}skin/' ), ( 'web/unsecure/base_media_url' , '{{unsecure_base_url}}media/' ), ( 'web/unsecure/base_js_url' , '{{unsecure_base_url}}js/' ), ( 'web/secure/base_link_url' , '{{secure_base_url}}' ), ( 'web/secure/base_skin_url' , '{{secure_base_url}}skin/' ), ( 'web/secure/base_media_url' , '{{secure_base_url}}media/' ), ( 'web/secure/base_js_url' , '{{secure_base_url}}js/' ) ON DUPLICATE KEY UPDATE ` value ` = VALUES ( ` value ` ); CLI clear cache php -r 'require \"app/Mage.php\"; Mage::app()->getCacheInstance()->flush();' Unison profile ~/.unison/magento1.prf include default ignore = Path var/?* ignore = Path var/.?* ignore = Path media force secure urls app/etc/local.xml <?xml version=\"1.0\"?> <config> <frontend> <secure_url> <all>/</all> </secure_url> </frontend> </config>","title":"Magento1"},{"location":"magento1/#setup-dynamic-base-url","text":"INSERT INTO core_config_data ( ` path ` , ` value ` ) VALUES ( 'web/url/use_store' , 1 ), ( 'web/unsecure/base_url' , '{{base_url}}' ), ( 'web/secure/base_url' , '{{base_url}}' ), ( 'web/unsecure/base_link_url' , '{{unsecure_base_url}}' ), ( 'web/unsecure/base_skin_url' , '{{unsecure_base_url}}skin/' ), ( 'web/unsecure/base_media_url' , '{{unsecure_base_url}}media/' ), ( 'web/unsecure/base_js_url' , '{{unsecure_base_url}}js/' ), ( 'web/secure/base_link_url' , '{{secure_base_url}}' ), ( 'web/secure/base_skin_url' , '{{secure_base_url}}skin/' ), ( 'web/secure/base_media_url' , '{{secure_base_url}}media/' ), ( 'web/secure/base_js_url' , '{{secure_base_url}}js/' ) ON DUPLICATE KEY UPDATE ` value ` = VALUES ( ` value ` );","title":"Setup Dynamic Base URL"},{"location":"magento1/#cli-clear-cache","text":"php -r 'require \"app/Mage.php\"; Mage::app()->getCacheInstance()->flush();'","title":"CLI clear cache"},{"location":"magento1/#unison-profile","text":"~/.unison/magento1.prf include default ignore = Path var/?* ignore = Path var/.?* ignore = Path media","title":"Unison profile"},{"location":"magento1/#force-secure-urls","text":"app/etc/local.xml <?xml version=\"1.0\"?> <config> <frontend> <secure_url> <all>/</all> </secure_url> </frontend> </config>","title":"force secure urls"},{"location":"mkdocs/","text":"Installation Proceed with https://www.mkdocs.org/#installation Install theme pip install mkdocs-material Make sure there is PATH to mkdocs export PATH=\"$HOME/.local/bin:$PATH\"","title":"Mkdocs"},{"location":"mkdocs/#installation","text":"Proceed with https://www.mkdocs.org/#installation Install theme pip install mkdocs-material Make sure there is PATH to mkdocs export PATH=\"$HOME/.local/bin:$PATH\"","title":"Installation"},{"location":"mysql/","text":"Grant Priviledges GRANT ALL PRIVILEGES ON `website_db`.* TO 'website_user'@'%'; Store mysql user name and password To use mysql and mysqldump commands without password just store credentials in ~/.my.cnf file, e.g.: [client] user=\"devuser\" password=\"devpassword\" Dump database w/o DEFINER dbName = 'dbname' && mysqldump --no-tablespaces --opt $dbName | sed -e 's/DEFINER[ ]*=[ ]*[^*]*\\*/\\*/' | bzip2 > $dbName .sql.bz2 dbName = 'dbname' && mysqldump --no-tablespaces --opt $dbName | sed -E 's/DEFINER=[^ *]+//' | bzip2 > $dbName .sql.bz2 Additional useful options: --extended-insert=FALSE - to analyze/edit dump --insert-ignore - when db has unique key duplicates (happens some time) | sed 's/ AUTO_INCREMENT=[0-9]*//g' - ignore AUTO_INCREMENT --ignore-table=cron_schedule - ignore AUTO_INCREMENT --no-data - dump schema w/o data --no-create-info - dump data w/o schema --no-tablespaces Find foreign key references All columns SELECT TABLE_NAME , COLUMN_NAME , CONSTRAINT_NAME , REFERENCED_TABLE_NAME , REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA . KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_SCHEMA = 'db_name' AND REFERENCED_TABLE_NAME = 'table_name' ; Specific column: SELECT TABLE_NAME , COLUMN_NAME , CONSTRAINT_NAME , REFERENCED_TABLE_NAME , REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA . KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_SCHEMA = 'db_name' AND REFERENCED_TABLE_NAME = 'table_name' AND REFERENCED_COLUMN_NAME = 'column_name' ; Source: https://tableplus.com/blog/2018/08/mysql-how-to-see-foreign-key-relationship-of-a-table.html Calculate database size SELECT table_schema AS ` database ` , ROUND ( SUM ( data_length + index_length ) / 1024 / 1024 , 2 ) AS size_mb FROM information_schema . TABLES GROUP BY table_schema ; Show Tables size SELECT table_name AS ` table ` , ROUND (( data_length + index_length ) / 1024 / 1024 , 2 ) AS size_mb FROM information_schema . TABLES WHERE TABLE_SCHEMA = 'mydb' ORDER BY size_mb DESC Locking if get_lock(lock_name, 1) then -- LOCKING ok, proceed set @0 = release_lock(lock_name); else -- LOCKING failed, handle this end if;","title":"Mysql"},{"location":"mysql/#grant-priviledges","text":"GRANT ALL PRIVILEGES ON `website_db`.* TO 'website_user'@'%';","title":"Grant Priviledges"},{"location":"mysql/#store-mysql-user-name-and-password","text":"To use mysql and mysqldump commands without password just store credentials in ~/.my.cnf file, e.g.: [client] user=\"devuser\" password=\"devpassword\"","title":"Store mysql user name and password"},{"location":"mysql/#dump-database-wo-definer","text":"dbName = 'dbname' && mysqldump --no-tablespaces --opt $dbName | sed -e 's/DEFINER[ ]*=[ ]*[^*]*\\*/\\*/' | bzip2 > $dbName .sql.bz2 dbName = 'dbname' && mysqldump --no-tablespaces --opt $dbName | sed -E 's/DEFINER=[^ *]+//' | bzip2 > $dbName .sql.bz2 Additional useful options: --extended-insert=FALSE - to analyze/edit dump --insert-ignore - when db has unique key duplicates (happens some time) | sed 's/ AUTO_INCREMENT=[0-9]*//g' - ignore AUTO_INCREMENT --ignore-table=cron_schedule - ignore AUTO_INCREMENT --no-data - dump schema w/o data --no-create-info - dump data w/o schema --no-tablespaces","title":"Dump database w/o DEFINER"},{"location":"mysql/#find-foreign-key-references","text":"All columns SELECT TABLE_NAME , COLUMN_NAME , CONSTRAINT_NAME , REFERENCED_TABLE_NAME , REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA . KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_SCHEMA = 'db_name' AND REFERENCED_TABLE_NAME = 'table_name' ; Specific column: SELECT TABLE_NAME , COLUMN_NAME , CONSTRAINT_NAME , REFERENCED_TABLE_NAME , REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA . KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_SCHEMA = 'db_name' AND REFERENCED_TABLE_NAME = 'table_name' AND REFERENCED_COLUMN_NAME = 'column_name' ; Source: https://tableplus.com/blog/2018/08/mysql-how-to-see-foreign-key-relationship-of-a-table.html","title":"Find foreign key references"},{"location":"mysql/#calculate-database-size","text":"SELECT table_schema AS ` database ` , ROUND ( SUM ( data_length + index_length ) / 1024 / 1024 , 2 ) AS size_mb FROM information_schema . TABLES GROUP BY table_schema ;","title":"Calculate database size"},{"location":"mysql/#show-tables-size","text":"SELECT table_name AS ` table ` , ROUND (( data_length + index_length ) / 1024 / 1024 , 2 ) AS size_mb FROM information_schema . TABLES WHERE TABLE_SCHEMA = 'mydb' ORDER BY size_mb DESC","title":"Show Tables size"},{"location":"mysql/#locking","text":"if get_lock(lock_name, 1) then -- LOCKING ok, proceed set @0 = release_lock(lock_name); else -- LOCKING failed, handle this end if;","title":"Locking"},{"location":"network/","text":"Check if port is opened $ nc -zvw5 google.com 80 Connection to google.com 80 port [tcp/http] succeeded! Get my IP Address ifconfig eth1 | awk '/inet addr/{print substr($2,6)}' View SSL Certificate on remote host echo | openssl s_client -showcerts -servername gnupg.org -connect gnupg.org:443 2 >/dev/null | openssl x509 -inform pem -noout -text nmap -p 443 --script ssl-cert gnupg.org Set interface zone permanently Create a new if-up script touch /etc/network/if-up.d/internal-zone && chmod +x $_ && vi $_ Put the following content and save (Shift+ZZ) #!/bin/sh if [ \" $IFACE \" ! = \"lxcbr0\" ] ; then exit 0 fi firewall-cmd --zone = internal --change-interface = \" $IFACE \" Note: the latest docker has issues if the docker0 interface isn't in the docker zone. sudo firewall-cmd --zone = docker --change-interface = docker0 See stackoverflow Reboot and check $ sudo firewall-cmd --get-active-zones docker interfaces: docker0 internal interfaces: lxcbr0 ... OpenWRT Speed test with iperf3 # iperf3 -c ping.online.net -u -b 1G Connecting to host ping.online.net, port 5201 [ 5 ] local xxx.xxx.xxx.xxx port 46361 connected to 62 .210.18.40 port 5201 [ ID ] Interval Transfer Bitrate Total Datagrams [ 5 ] 0 .00-1.00 sec 114 MBytes 956 Mbits/sec 82519 [ 5 ] 1 .00-2.00 sec 111 MBytes 931 Mbits/sec 80335 [ 5 ] 2 .00-3.00 sec 108 MBytes 909 Mbits/sec 78439 [ 5 ] 3 .00-4.00 sec 109 MBytes 918 Mbits/sec 79250 [ 5 ] 4 .00-5.00 sec 109 MBytes 914 Mbits/sec 78939 [ 5 ] 5 .00-6.00 sec 109 MBytes 917 Mbits/sec 79203 [ 5 ] 6 .00-7.00 sec 111 MBytes 930 Mbits/sec 80253 [ 5 ] 7 .00-8.00 sec 110 MBytes 924 Mbits/sec 79802 [ 5 ] 8 .00-9.00 sec 110 MBytes 923 Mbits/sec 79676 [ 5 ] 9 .00-10.00 sec 111 MBytes 931 Mbits/sec 80381 - - - - - - - - - - - - - - - - - - - - - - - - - [ ID ] Interval Transfer Bitrate Jitter Lost/Total Datagrams [ 5 ] 0 .00-10.00 sec 1 .08 GBytes 925 Mbits/sec 0 .000 ms 0 /798797 ( 0 % ) sender [ 5 ] 0 .00-10.00 sec 114 MBytes 95 .7 Mbits/sec 0 .009 ms 716162 /798783 ( 90 % ) receiver iperf Done. - Results interpretation - iperf3 servers Set up Dropbear public key authentication ssh-copy-id root@192.168.1.1 ssh root@192.168.1.1 cp /root/.ssh/authorized_keys /etc/dropbear/ chmod 700 /etc/dropbear chmod 600 /etc/dropbear/authorized_keys IP Addresses daily log (cron job) 0 4 * * * echo \"`date +%Y-%m-%d` $(ifconfig eth1 | awk '/inet addr/{print substr($2,6)}')\" >> /root/ip.log","title":"Network"},{"location":"network/#check-if-port-is-opened","text":"$ nc -zvw5 google.com 80 Connection to google.com 80 port [tcp/http] succeeded!","title":"Check if port is opened"},{"location":"network/#get-my-ip-address","text":"ifconfig eth1 | awk '/inet addr/{print substr($2,6)}'","title":"Get my IP Address"},{"location":"network/#view-ssl-certificate-on-remote-host","text":"echo | openssl s_client -showcerts -servername gnupg.org -connect gnupg.org:443 2 >/dev/null | openssl x509 -inform pem -noout -text nmap -p 443 --script ssl-cert gnupg.org","title":"View SSL Certificate on remote host"},{"location":"network/#set-interface-zone-permanently","text":"Create a new if-up script touch /etc/network/if-up.d/internal-zone && chmod +x $_ && vi $_ Put the following content and save (Shift+ZZ) #!/bin/sh if [ \" $IFACE \" ! = \"lxcbr0\" ] ; then exit 0 fi firewall-cmd --zone = internal --change-interface = \" $IFACE \" Note: the latest docker has issues if the docker0 interface isn't in the docker zone. sudo firewall-cmd --zone = docker --change-interface = docker0 See stackoverflow Reboot and check $ sudo firewall-cmd --get-active-zones docker interfaces: docker0 internal interfaces: lxcbr0 ...","title":"Set interface zone permanently"},{"location":"network/#openwrt","text":"","title":"OpenWRT"},{"location":"network/#speed-test-with-iperf3","text":"# iperf3 -c ping.online.net -u -b 1G Connecting to host ping.online.net, port 5201 [ 5 ] local xxx.xxx.xxx.xxx port 46361 connected to 62 .210.18.40 port 5201 [ ID ] Interval Transfer Bitrate Total Datagrams [ 5 ] 0 .00-1.00 sec 114 MBytes 956 Mbits/sec 82519 [ 5 ] 1 .00-2.00 sec 111 MBytes 931 Mbits/sec 80335 [ 5 ] 2 .00-3.00 sec 108 MBytes 909 Mbits/sec 78439 [ 5 ] 3 .00-4.00 sec 109 MBytes 918 Mbits/sec 79250 [ 5 ] 4 .00-5.00 sec 109 MBytes 914 Mbits/sec 78939 [ 5 ] 5 .00-6.00 sec 109 MBytes 917 Mbits/sec 79203 [ 5 ] 6 .00-7.00 sec 111 MBytes 930 Mbits/sec 80253 [ 5 ] 7 .00-8.00 sec 110 MBytes 924 Mbits/sec 79802 [ 5 ] 8 .00-9.00 sec 110 MBytes 923 Mbits/sec 79676 [ 5 ] 9 .00-10.00 sec 111 MBytes 931 Mbits/sec 80381 - - - - - - - - - - - - - - - - - - - - - - - - - [ ID ] Interval Transfer Bitrate Jitter Lost/Total Datagrams [ 5 ] 0 .00-10.00 sec 1 .08 GBytes 925 Mbits/sec 0 .000 ms 0 /798797 ( 0 % ) sender [ 5 ] 0 .00-10.00 sec 114 MBytes 95 .7 Mbits/sec 0 .009 ms 716162 /798783 ( 90 % ) receiver iperf Done. - Results interpretation - iperf3 servers","title":"Speed test with iperf3"},{"location":"network/#set-up-dropbear-public-key-authentication","text":"ssh-copy-id root@192.168.1.1 ssh root@192.168.1.1 cp /root/.ssh/authorized_keys /etc/dropbear/ chmod 700 /etc/dropbear chmod 600 /etc/dropbear/authorized_keys","title":"Set up Dropbear public key authentication"},{"location":"network/#ip-addresses-daily-log-cron-job","text":"0 4 * * * echo \"`date +%Y-%m-%d` $(ifconfig eth1 | awk '/inet addr/{print substr($2,6)}')\" >> /root/ip.log","title":"IP Addresses daily log (cron job)"},{"location":"patch/","text":"Create Directory Patch diff --exclude = \".git\" -ruN orig/ new/ | sed \"s#new/#b/#\" | sed 's#orig/#a/#' > patch.sql where: -r - recursive, so do subdirectories -u - unified style, if your system lacks it or if recipient may not have it, use \"-c\" -N - treat absent files as empty References: 1 , 2 . Apply Patch patch '-p1' --no-backup-if-mismatch -d 'vendor/vendor-name/module-name' < '_extra/patches/vendor-name/module-name/patch-name.patch'","title":"Patch"},{"location":"patch/#create-directory-patch","text":"diff --exclude = \".git\" -ruN orig/ new/ | sed \"s#new/#b/#\" | sed 's#orig/#a/#' > patch.sql where: -r - recursive, so do subdirectories -u - unified style, if your system lacks it or if recipient may not have it, use \"-c\" -N - treat absent files as empty References: 1 , 2 .","title":"Create Directory Patch"},{"location":"patch/#apply-patch","text":"patch '-p1' --no-backup-if-mismatch -d 'vendor/vendor-name/module-name' < '_extra/patches/vendor-name/module-name/patch-name.patch'","title":"Apply Patch"},{"location":"pdf/","text":"Create Booklet pdfbook --short-edge --frame true --scale 0.95 file.pdf Convert PDF to JPG vips copy sample.pdf [ dpi = 300 ,page = 0 ] sample-page-1.jpg","title":"Pdf"},{"location":"pdf/#create-booklet","text":"pdfbook --short-edge --frame true --scale 0.95 file.pdf","title":"Create Booklet"},{"location":"pdf/#convert-pdf-to-jpg","text":"vips copy sample.pdf [ dpi = 300 ,page = 0 ] sample-page-1.jpg","title":"Convert PDF to JPG"},{"location":"performance/","text":"Strace Slow SQL Queries strace -p<FPM_PID> -T -r --trace = sendto,recvfrom Slow Filesystem strace -p<FPM_PID> -T --trace = access,open","title":"Performance"},{"location":"performance/#strace","text":"Slow SQL Queries strace -p<FPM_PID> -T -r --trace = sendto,recvfrom Slow Filesystem strace -p<FPM_PID> -T --trace = access,open","title":"Strace"},{"location":"php/","text":"Date Diff php -r \"echo (new DateTime('2019-10-31 14:37:17'))->diff(new DateTime('2019-10-29 10:03:05'))->format('%R%ad%Hh');\" Useful links Accessing private properties in PHP phpcs & phpcbf cd ~/bin wget https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar -O phpcs && chmod +x phpcs wget https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar -O phpcbf && chmod +x phpcbf # check supported standards $ phpcs -i The installed coding standards are MySource, PEAR, PSR1, PSR12, PSR2, Squiz and Zend # add custom standard, e.g cd ~/opt git clone https://github.com/magento/magento-coding-standard cd magento-coding-standard composer install # add custom standsrd to phpcs phpcs --config-set installed_paths /opt/magento-coding-standard # check supported standards (see that Magento2 standsrd is added) $ phpcs -i The installed coding standards are MySource, PEAR, PSR1, PSR12, PSR2, Squiz, Zend and Magento2 Other commands may be useful: phpcs --config-show installed_paths # remove installed_paths if they are wrong phpcs --config-delete installed_paths","title":"Php"},{"location":"php/#date-diff","text":"php -r \"echo (new DateTime('2019-10-31 14:37:17'))->diff(new DateTime('2019-10-29 10:03:05'))->format('%R%ad%Hh');\"","title":"Date Diff"},{"location":"php/#useful-links","text":"Accessing private properties in PHP","title":"Useful links"},{"location":"php/#phpcs-phpcbf","text":"cd ~/bin wget https://squizlabs.github.io/PHP_CodeSniffer/phpcs.phar -O phpcs && chmod +x phpcs wget https://squizlabs.github.io/PHP_CodeSniffer/phpcbf.phar -O phpcbf && chmod +x phpcbf # check supported standards $ phpcs -i The installed coding standards are MySource, PEAR, PSR1, PSR12, PSR2, Squiz and Zend # add custom standard, e.g cd ~/opt git clone https://github.com/magento/magento-coding-standard cd magento-coding-standard composer install # add custom standsrd to phpcs phpcs --config-set installed_paths /opt/magento-coding-standard # check supported standards (see that Magento2 standsrd is added) $ phpcs -i The installed coding standards are MySource, PEAR, PSR1, PSR12, PSR2, Squiz, Zend and Magento2 Other commands may be useful: phpcs --config-show installed_paths # remove installed_paths if they are wrong phpcs --config-delete installed_paths","title":"phpcs &amp; phpcbf"},{"location":"raspberry-pi/","text":"GPU Memory show current gpu memory config vcgencmd get_mem gpu change gpu memory vi /boot/config.txt # add/change the following line [ all ] gpu_mem = 256","title":"GPU Memory"},{"location":"raspberry-pi/#gpu-memory","text":"show current gpu memory config vcgencmd get_mem gpu change gpu memory vi /boot/config.txt # add/change the following line [ all ] gpu_mem = 256","title":"GPU Memory"},{"location":"redis/","text":"Useful commands redis-cli FLUSHDB # delete all the keys of the currently selected DB. redis-cli FLUSHALL # delete all the keys of all the existing databases, not just the currently selected one.","title":"Redis"},{"location":"redis/#useful-commands","text":"redis-cli FLUSHDB # delete all the keys of the currently selected DB. redis-cli FLUSHALL # delete all the keys of all the existing databases, not just the currently selected one.","title":"Useful commands"},{"location":"ssh/","text":"Separate ssh key for a specific host vi ~/.ssh/config Host github.com IdentityFile ~/.ssh/github_id_rsa.pub","title":"Ssh"},{"location":"ssh/#separate-ssh-key-for-a-specific-host","text":"vi ~/.ssh/config Host github.com IdentityFile ~/.ssh/github_id_rsa.pub","title":"Separate ssh key for a specific host"},{"location":"system/","text":"Info #system info in short format inxi -F Disable Selinux #runtime sudo setenforce 0 #permanently /etc/selinux/config SELINUX=disabled Kernel parameters vi /etc/sysctl.conf # custom settings $ disable IPv6 net.ipv6.conf.all.disable_ipv6 = 1 net.ipv6.conf.default.disable_ipv6 = 1 net.ipv6.conf.lo.disable_ipv6 = 1 # Increase inotify.max_user_watches (https://github.com/guard/listen/wiki/Increasing-the-amount-of-inotify-watchers) fs.inotify.max_user_watches = 524288 Reload kernel parameters sysctl -p Battery Info upower -i /org/freedesktop/UPower/devices/battery_BAT0 output: native-path: BAT0 vendor: Hewlett-Packard model: Primary power supply: yes updated: Fri 12 Mar 2021 11 :39:46 EET ( 58 seconds ago ) has history: yes has statistics: yes battery present: yes rechargeable: yes state: discharging warning-level: none energy: 58 .7664 Wh energy-empty: 0 Wh energy-full: 58 .7664 Wh energy-full-design: 57 .288 Wh energy-rate: 6 .8376 W voltage: 12 .783 V time to empty: 8 .6 hours percentage: 100 % capacity: 100 % technology: lithium-ion icon-name: 'battery-full-symbolic' History ( rate ) : 1615541986 6 .838 discharging","title":"System"},{"location":"system/#info","text":"#system info in short format inxi -F","title":"Info"},{"location":"system/#disable-selinux","text":"#runtime sudo setenforce 0 #permanently /etc/selinux/config SELINUX=disabled","title":"Disable Selinux"},{"location":"system/#kernel-parameters","text":"vi /etc/sysctl.conf # custom settings $ disable IPv6 net.ipv6.conf.all.disable_ipv6 = 1 net.ipv6.conf.default.disable_ipv6 = 1 net.ipv6.conf.lo.disable_ipv6 = 1 # Increase inotify.max_user_watches (https://github.com/guard/listen/wiki/Increasing-the-amount-of-inotify-watchers) fs.inotify.max_user_watches = 524288 Reload kernel parameters sysctl -p","title":"Kernel parameters"},{"location":"system/#battery-info","text":"upower -i /org/freedesktop/UPower/devices/battery_BAT0 output: native-path: BAT0 vendor: Hewlett-Packard model: Primary power supply: yes updated: Fri 12 Mar 2021 11 :39:46 EET ( 58 seconds ago ) has history: yes has statistics: yes battery present: yes rechargeable: yes state: discharging warning-level: none energy: 58 .7664 Wh energy-empty: 0 Wh energy-full: 58 .7664 Wh energy-full-design: 57 .288 Wh energy-rate: 6 .8376 W voltage: 12 .783 V time to empty: 8 .6 hours percentage: 100 % capacity: 100 % technology: lithium-ion icon-name: 'battery-full-symbolic' History ( rate ) : 1615541986 6 .838 discharging","title":"Battery Info"},{"location":"xdebug/","text":"PHP-CLI php -dxdebug.remote_autostart=1 script.php","title":"Xdebug"},{"location":"xdebug/#php-cli","text":"php -dxdebug.remote_autostart=1 script.php","title":"PHP-CLI"},{"location":"bash/general/","text":"path info file=\"/home/user/file.inc.php\" basename=${file##*/} # file.inc.php filename=${basename%.*} # file.inc extension=${file##*.} # php dirname=${file%/*} # /home/user SSH authentication by key cd ~/.ssh ssh-keygen ssh-copy-id -i ~/.ssh/id_rsa.pub remote.host.com ssh-add ssh remote.host.com If username has a \u201c@\u201d symbol then use the following: ssh -l user@example.com example.com mkdir .ssh touch .ssh/authorized_keys exit cat ~/.ssh/id_rsa.pub | ssh -l user@example.com example.com 'cat >> .ssh/authorized_keys' chmod 700 .ssh chmod 400 .ssh/authorized_keys ssh -l user@example.com example.com Bash prompt w/ path and colors ~/.bash_profile : Local (green) export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;208m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" Remote (yellow): export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;226m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;226m\\]\\h:\\[\\e[0;38;05;180m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" Root (red and yellow) export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;196m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;226m\\]\\h:\\[\\e[0;38;05;180m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" Colors for i in { 0 ..255 } ; do echo -e \"\\e[38;05; ${ i } m ${ i } \" ; done | column -c 80 -s ' ' ; echo -e \"\\e[m\" for code in $( seq -w 0 255 ) ; do for attr in 0 1 ; do printf \"%s-%03s %bTest%b\\n\" \" ${ attr } \" \" ${ code } \" \"\\e[ ${ attr } ;38;05; ${ code } m\" \"\\e[m\" ; done ; done | column -c $(( COLUMNS*2 )) Vim ~/.vimrc set nocompatible set backspace = 2 set tabstop = 4 set expandtab set number Load additional php.ini when run php from terminal Add the following line into ~/.bashrc file: export PHP_INI_SCAN_DIR=\":$HOME/etc/php70\" Put additional config into ~/etc/php70/php.ini , e.g: memory_limit = -1 Run the command #1 or re-login terminal Check ini paths: php --ini Check memory limit: $ php -i | grep memory_limit memory_limit => -1 => -1 More info on php.net Convert DOS to Unix newlines in current directory excluding .git directory find . -type f -not -path './.git/*' -print0 | xargs -0 dos2unix Use custom SSH port with rsync/ssh/scp/sshfs rsync -avz -e \"ssh -p 2244\" --exclude=var user@server.com:/html/ . ssh user@server.com -p 2244 scp -P 2244 user@server.com:/html/website_db.sql . sshfs user@server.com:/html -p 2244 server.com Upload multiple files w/o file name duplication scp { ,user@example.com:~/ } public_html/index.php scp { ,user@example.com:~/ } public_html/.htaccess scp { ,user@example.com:~/ } public_html/images/logo.png scp { ,user@example.com:~/ } public_html/js/jquery.js FIX permissions find . -type f -exec chmod 640 {} \\; find . -type d -exec chmod 750 {} \\; Statistics Find # of code lines in directory ( find . -type f -name '*.php' -print0 | xargs -0 cat ) | wc -l Date/Time format date +%Y-%m-%d \\ %H:%M:%S \\ %:z # 2020-04-02 21:53:08 +03:00 date -Iseconds # 2020-04-02T23:02:42+03:00 Ctrl+C Hook trap ctrl_c INT function ctrl_c() { echo \"Triggered CTRL+C event\" } Process start end time ps -eo pid,lstart,etime,args | sed '1p;/php/!d' Diff large files diff -y --suppress-common-lines --speed-large-files file1 file2 Source: unix.stackexchange.com Useful links How to parse command line arguments","title":"General"},{"location":"bash/general/#path-info","text":"file=\"/home/user/file.inc.php\" basename=${file##*/} # file.inc.php filename=${basename%.*} # file.inc extension=${file##*.} # php dirname=${file%/*} # /home/user","title":"path info"},{"location":"bash/general/#ssh-authentication-by-key","text":"cd ~/.ssh ssh-keygen ssh-copy-id -i ~/.ssh/id_rsa.pub remote.host.com ssh-add ssh remote.host.com If username has a \u201c@\u201d symbol then use the following: ssh -l user@example.com example.com mkdir .ssh touch .ssh/authorized_keys exit cat ~/.ssh/id_rsa.pub | ssh -l user@example.com example.com 'cat >> .ssh/authorized_keys' chmod 700 .ssh chmod 400 .ssh/authorized_keys ssh -l user@example.com example.com","title":"SSH authentication by key"},{"location":"bash/general/#bash-prompt-w-path-and-colors","text":"~/.bash_profile : Local (green) export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;208m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" Remote (yellow): export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;226m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;226m\\]\\h:\\[\\e[0;38;05;180m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" Root (red and yellow) export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;196m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;226m\\]\\h:\\[\\e[0;38;05;180m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\"","title":"Bash prompt w/ path and colors"},{"location":"bash/general/#colors","text":"for i in { 0 ..255 } ; do echo -e \"\\e[38;05; ${ i } m ${ i } \" ; done | column -c 80 -s ' ' ; echo -e \"\\e[m\" for code in $( seq -w 0 255 ) ; do for attr in 0 1 ; do printf \"%s-%03s %bTest%b\\n\" \" ${ attr } \" \" ${ code } \" \"\\e[ ${ attr } ;38;05; ${ code } m\" \"\\e[m\" ; done ; done | column -c $(( COLUMNS*2 ))","title":"Colors"},{"location":"bash/general/#vim","text":"~/.vimrc set nocompatible set backspace = 2 set tabstop = 4 set expandtab set number","title":"Vim"},{"location":"bash/general/#load-additional-phpini-when-run-php-from-terminal","text":"Add the following line into ~/.bashrc file: export PHP_INI_SCAN_DIR=\":$HOME/etc/php70\" Put additional config into ~/etc/php70/php.ini , e.g: memory_limit = -1 Run the command #1 or re-login terminal Check ini paths: php --ini Check memory limit: $ php -i | grep memory_limit memory_limit => -1 => -1 More info on php.net","title":"Load additional php.ini when run php from terminal"},{"location":"bash/general/#convert-dos-to-unix-newlines-in-current-directory-excluding-git-directory","text":"find . -type f -not -path './.git/*' -print0 | xargs -0 dos2unix","title":"Convert DOS to Unix newlines in current directory excluding .git directory"},{"location":"bash/general/#use-custom-ssh-port-with-rsyncsshscpsshfs","text":"rsync -avz -e \"ssh -p 2244\" --exclude=var user@server.com:/html/ . ssh user@server.com -p 2244 scp -P 2244 user@server.com:/html/website_db.sql . sshfs user@server.com:/html -p 2244 server.com","title":"Use custom SSH port with rsync/ssh/scp/sshfs"},{"location":"bash/general/#upload-multiple-files-wo-file-name-duplication","text":"scp { ,user@example.com:~/ } public_html/index.php scp { ,user@example.com:~/ } public_html/.htaccess scp { ,user@example.com:~/ } public_html/images/logo.png scp { ,user@example.com:~/ } public_html/js/jquery.js","title":"Upload multiple files w/o file name duplication"},{"location":"bash/general/#fix-permissions","text":"find . -type f -exec chmod 640 {} \\; find . -type d -exec chmod 750 {} \\;","title":"FIX permissions"},{"location":"bash/general/#statistics","text":"","title":"Statistics"},{"location":"bash/general/#find-of-code-lines-in-directory","text":"( find . -type f -name '*.php' -print0 | xargs -0 cat ) | wc -l","title":"Find # of code lines in directory"},{"location":"bash/general/#datetime-format","text":"date +%Y-%m-%d \\ %H:%M:%S \\ %:z # 2020-04-02 21:53:08 +03:00 date -Iseconds # 2020-04-02T23:02:42+03:00","title":"Date/Time format"},{"location":"bash/general/#ctrlc-hook","text":"trap ctrl_c INT function ctrl_c() { echo \"Triggered CTRL+C event\" }","title":"Ctrl+C Hook"},{"location":"bash/general/#process-start-end-time","text":"ps -eo pid,lstart,etime,args | sed '1p;/php/!d'","title":"Process start end time"},{"location":"bash/general/#diff-large-files","text":"diff -y --suppress-common-lines --speed-large-files file1 file2 Source: unix.stackexchange.com","title":"Diff large files"},{"location":"bash/general/#useful-links","text":"How to parse command line arguments","title":"Useful links"},{"location":"git/branch/","text":"Misc Remove gone branches git fetch -p && git branch -vv | awk '/: gone]/{print $1}' | xargs git branch -D Sources: 1 , 2 . Replace local branch with origin git reset --hard origin/featureXXX Source: 1 Merge Check if commit merged: git fetch origin # ?? git branch -r --contains <commit> Merged branches git branch --merged master # local branches git branch -r --merged master # remote branches git branch -a --merged master # all branches Not merged branches git branch --no-merged master # local branches git branch -r --no-merged master # remote branches git branch -a --no-merged master # all branches --dry-run git merge --no-commit --no-ff my_branch git diff --cached git merge --abort see stackoverflow Squash Merge branch as a new single commit: git checkout master git merge --squash bugfix git commit Remove git branch -a # show list of branches git branch -d <branch_name> # remove \u201c<branch_name>\u201d branch locally git push origin --delete <branch_name> # remove remote \u201c<branch_name>\u201d branch git branch -a # show list of branches to ensure \u201c<branch_name>\u201d is removed Rename git branch -m old-name new-name # rename git push origin :old-name new-name # push to origin git push origin -u new-name # add upstream (tracking) reference Source: 1 Rebase git checkout master git pull git checkout my_brarch git rebase -i master # pick first comment and fixup the rest ones git push #git push -f # if changed were already pushed to remote Rebase onto another branch Precondition: git checkout master git checkout -b feature_1 # create a branch from master # add & commit changes git checkout -b feature_2 # create a branch from feature_1 # add & commit changes Rebase feature_2 onto master branch: git checkout feature_2 git rebase --onto master feature_1 More info Undoing a 'git push' git push -f origin last_known_good_commit:branch_name Source: 1 Move a commit to another branch Copy commit to a new branch: git checkout -b new_branch_name git cherry-pick <commit> Back to the last good commit in the old branch: git checkout old_branch_name git reset --hard <last_good_commit>","title":"Branch"},{"location":"git/branch/#misc","text":"","title":"Misc"},{"location":"git/branch/#remove-gone-branches","text":"git fetch -p && git branch -vv | awk '/: gone]/{print $1}' | xargs git branch -D Sources: 1 , 2 .","title":"Remove gone branches"},{"location":"git/branch/#replace-local-branch-with-origin","text":"git reset --hard origin/featureXXX Source: 1","title":"Replace local branch with origin"},{"location":"git/branch/#merge","text":"","title":"Merge"},{"location":"git/branch/#check-if-commit-merged","text":"git fetch origin # ?? git branch -r --contains <commit>","title":"Check if commit merged:"},{"location":"git/branch/#merged-branches","text":"git branch --merged master # local branches git branch -r --merged master # remote branches git branch -a --merged master # all branches","title":"Merged branches"},{"location":"git/branch/#not-merged-branches","text":"git branch --no-merged master # local branches git branch -r --no-merged master # remote branches git branch -a --no-merged master # all branches","title":"Not merged branches"},{"location":"git/branch/#-dry-run","text":"git merge --no-commit --no-ff my_branch git diff --cached git merge --abort see stackoverflow","title":"--dry-run"},{"location":"git/branch/#squash","text":"Merge branch as a new single commit: git checkout master git merge --squash bugfix git commit","title":"Squash"},{"location":"git/branch/#remove","text":"git branch -a # show list of branches git branch -d <branch_name> # remove \u201c<branch_name>\u201d branch locally git push origin --delete <branch_name> # remove remote \u201c<branch_name>\u201d branch git branch -a # show list of branches to ensure \u201c<branch_name>\u201d is removed","title":"Remove"},{"location":"git/branch/#rename","text":"git branch -m old-name new-name # rename git push origin :old-name new-name # push to origin git push origin -u new-name # add upstream (tracking) reference Source: 1","title":"Rename"},{"location":"git/branch/#rebase","text":"git checkout master git pull git checkout my_brarch git rebase -i master # pick first comment and fixup the rest ones git push #git push -f # if changed were already pushed to remote","title":"Rebase"},{"location":"git/branch/#rebase-onto-another-branch","text":"Precondition: git checkout master git checkout -b feature_1 # create a branch from master # add & commit changes git checkout -b feature_2 # create a branch from feature_1 # add & commit changes Rebase feature_2 onto master branch: git checkout feature_2 git rebase --onto master feature_1 More info","title":"Rebase onto another branch"},{"location":"git/branch/#undoing-a-git-push","text":"git push -f origin last_known_good_commit:branch_name Source: 1","title":"Undoing a 'git push'"},{"location":"git/branch/#move-a-commit-to-another-branch","text":"Copy commit to a new branch: git checkout -b new_branch_name git cherry-pick <commit> Back to the last good commit in the old branch: git checkout old_branch_name git reset --hard <last_good_commit>","title":"Move a commit to another branch"},{"location":"git/config/","text":"List of global configs git config --global -l Global .gitignore git config --global core.excludesfile ~/.gitignore vi ~/.gitignore .idea vendor studio .phpv .sass-cache Log alias git config --global alias.lg \"log --all --color --graph --pretty=format:'%Cred%h%Creset - %s %Cgreen(%cr %ci) %C(bold blue)<%an>%Creset %C(yellow)%d%Creset' --abbrev-commit\" git config --global alias.lgm \"log --pretty=oneline --abbrev-commit\" Automatically prune Before fetching, automatically remove any remote-tracking references that no longer exist on the remote. git config --global fetch.prune true Remote git remote -v # show git remote add origin git@github.com:user/repo.git # add git remote set-url origin git@github.com:user/repo.git # change","title":"Config"},{"location":"git/config/#list-of-global-configs","text":"git config --global -l","title":"List of global configs"},{"location":"git/config/#global-gitignore","text":"git config --global core.excludesfile ~/.gitignore vi ~/.gitignore .idea vendor studio .phpv .sass-cache","title":"Global .gitignore"},{"location":"git/config/#log-alias","text":"git config --global alias.lg \"log --all --color --graph --pretty=format:'%Cred%h%Creset - %s %Cgreen(%cr %ci) %C(bold blue)<%an>%Creset %C(yellow)%d%Creset' --abbrev-commit\" git config --global alias.lgm \"log --pretty=oneline --abbrev-commit\"","title":"Log alias"},{"location":"git/config/#automatically-prune","text":"Before fetching, automatically remove any remote-tracking references that no longer exist on the remote. git config --global fetch.prune true","title":"Automatically prune"},{"location":"git/config/#remote","text":"git remote -v # show git remote add origin git@github.com:user/repo.git # add git remote set-url origin git@github.com:user/repo.git # change","title":"Remote"},{"location":"git/diff/","text":"List of changed files git diff --name-only SHA1 SHA2 # between two comments git diff --name-only HEAD~2 HEAD # between last two comments","title":"Diff"},{"location":"git/diff/#list-of-changed-files","text":"git diff --name-only SHA1 SHA2 # between two comments git diff --name-only HEAD~2 HEAD # between last two comments","title":"List of changed files"},{"location":"git/misc/","text":"define parent branch parent = $( git log --pretty = format: '%D' HEAD^ | grep 'origin/' | head -n1 | sed 's@origin/@@' | sed 's@,.*@@' ) list of unmerged files and locally changed files: ( git diff --no-commit-id --name-only origin/ $parent ..HEAD ; git status --porcelain | sed s/^...// ) | sort | uniq Skip gitlab CI git push -o ci.skip Source: 1","title":"Misc"},{"location":"git/oh-my-git/","text":"Installation Checkout oh-my-git and switch to the \"theme\" branch sudo su - cd /opt git clone https://github.com/yutv/oh-my-git cd oh-my-git git checkout theme exit Add the following lines into your ~/.bashrc declare -A OMG_THEME =([ \"right_side_bg\" ]= 'green' ) source /opt/oh-my-git/prompt.sh Install FontAwesome Ubuntu apt install fonts-font-awesome Gnome Tweaks > Fonts > Monospace Text = SourceCodePro+PowerLine+Awesome Regular Regular 11 Fedora cd /tmp git clone http://github.com/gabrielelana/awesome-terminal-fonts cd awesome-terminal-fonts git checkout patching-strategy mkdir -p ~/.fonts cp patched/*.ttf ~/.fonts # update the font-info cache sudo fc-cache -fv ~/.fonts rm -Rf /tmp/awesome-terminal-fonts Now try to change directory to a git repo and you will see a git info bar, e.g.:","title":"Oh my git"},{"location":"git/oh-my-git/#installation","text":"Checkout oh-my-git and switch to the \"theme\" branch sudo su - cd /opt git clone https://github.com/yutv/oh-my-git cd oh-my-git git checkout theme exit Add the following lines into your ~/.bashrc declare -A OMG_THEME =([ \"right_side_bg\" ]= 'green' ) source /opt/oh-my-git/prompt.sh Install FontAwesome Ubuntu apt install fonts-font-awesome Gnome Tweaks > Fonts > Monospace Text = SourceCodePro+PowerLine+Awesome Regular Regular 11 Fedora cd /tmp git clone http://github.com/gabrielelana/awesome-terminal-fonts cd awesome-terminal-fonts git checkout patching-strategy mkdir -p ~/.fonts cp patched/*.ttf ~/.fonts # update the font-info cache sudo fc-cache -fv ~/.fonts rm -Rf /tmp/awesome-terminal-fonts Now try to change directory to a git repo and you will see a git info bar, e.g.:","title":"Installation"},{"location":"git/patch/","text":"Create a Git Patch git format-patch -1 HEAD where - -n number of commits from the topmost one Source: stackoweflow Apply Git Patch git am < file.patch","title":"Patch"},{"location":"git/patch/#create-a-git-patch","text":"git format-patch -1 HEAD where - -n number of commits from the topmost one Source: stackoweflow","title":"Create a Git Patch"},{"location":"git/patch/#apply-git-patch","text":"git am < file.patch","title":"Apply Git Patch"},{"location":"git/stash/","text":"git stash # create a stash git stash pop # apply & remove the recent stash git stash show # recent stash files git stash show -p # recent stash diff git stash list # stashes list git stash show -p stash@ { 1 } # specific stash diff","title":"Stash"},{"location":"git/tag/","text":"Set tag git tag v1.1.2 # set tag in the local repository git push origin v1.1.2 # push tag to the remote repository","title":"Tag"},{"location":"git/tag/#set-tag","text":"git tag v1.1.2 # set tag in the local repository git push origin v1.1.2 # push tag to the remote repository","title":"Set tag"},{"location":"magento-2/1-install/","text":"Install Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \" Create Magento Project Latest Magento version: Magento Open Source composer create-project --repository-url = https://repo.magento.com/ magento/project-community-edition mce24x Magento Commerce composer create-project --repository-url = https://repo.magento.com/ magento/project-enterprise-edition mee24x Magento Cloud composer create-project --repository-url = https://repo.magento.com/ magento/magento-cloud-metapackage mc24x Specific Magento version: Magento Open Source composer create-project --repository-url = https://repo.magento.com/ magento/project-community-edition = 2 .4.0 mce240 Magento Commerce composer create-project --repository-url = https://repo.magento.com/ magento/project-enterprise-edition = 2 .4.0 mee240 Magento Cloud composer create-project --repository-url = https://repo.magento.com/ magento/magento-cloud-metapackage = 2 .4.0 mc240 Show available versions: Magento Open Source composer show magento/product-community-edition 2 .4.* --all | grep -m 1 versions Magento Commerce composer show magento/product-enterprise-edition 2 .4.* --all | grep -m 1 versions Magento Cloud composer show magento/magento-cloud-metapackage 2 .4.* --all | grep -m 1 versions Install Magento from CLI m2 setup:install \\ --use-rewrites = 1 \\ --use-secure = 1 \\ --base-url-secure = https://dev.local/m24x/ \\ --use-secure-admin = 1 \\ --base-url = https://dev.local/m24x/ \\ --backend-frontname = admin \\ --db-name = m24x \\ --db-user = duser \\ --db-password = dpass \\ --session-save = files Add Administrator m2 admin:user:create \\ --admin-user = admin \\ --admin-password = password \\ --admin-email = $USER @dev.local \\ --admin-firstname = Support \\ --admin-lastname = Account Disable Two factor Authentication php bin/magento module:disable Magento_TwoFactorAuth php bin/magento setup:upgrade Upgrade Magento Project cp composer.json composer.json.bak composer require magento/product-community-edition 2 .3.3 --no-update composer update m2 setup:upgrade","title":"Install"},{"location":"magento-2/1-install/#install","text":"Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \"","title":"Install"},{"location":"magento-2/1-install/#create-magento-project","text":"Latest Magento version: Magento Open Source composer create-project --repository-url = https://repo.magento.com/ magento/project-community-edition mce24x Magento Commerce composer create-project --repository-url = https://repo.magento.com/ magento/project-enterprise-edition mee24x Magento Cloud composer create-project --repository-url = https://repo.magento.com/ magento/magento-cloud-metapackage mc24x Specific Magento version: Magento Open Source composer create-project --repository-url = https://repo.magento.com/ magento/project-community-edition = 2 .4.0 mce240 Magento Commerce composer create-project --repository-url = https://repo.magento.com/ magento/project-enterprise-edition = 2 .4.0 mee240 Magento Cloud composer create-project --repository-url = https://repo.magento.com/ magento/magento-cloud-metapackage = 2 .4.0 mc240 Show available versions: Magento Open Source composer show magento/product-community-edition 2 .4.* --all | grep -m 1 versions Magento Commerce composer show magento/product-enterprise-edition 2 .4.* --all | grep -m 1 versions Magento Cloud composer show magento/magento-cloud-metapackage 2 .4.* --all | grep -m 1 versions","title":"Create Magento Project"},{"location":"magento-2/1-install/#install-magento-from-cli","text":"m2 setup:install \\ --use-rewrites = 1 \\ --use-secure = 1 \\ --base-url-secure = https://dev.local/m24x/ \\ --use-secure-admin = 1 \\ --base-url = https://dev.local/m24x/ \\ --backend-frontname = admin \\ --db-name = m24x \\ --db-user = duser \\ --db-password = dpass \\ --session-save = files","title":"Install Magento from CLI"},{"location":"magento-2/1-install/#add-administrator","text":"m2 admin:user:create \\ --admin-user = admin \\ --admin-password = password \\ --admin-email = $USER @dev.local \\ --admin-firstname = Support \\ --admin-lastname = Account","title":"Add Administrator"},{"location":"magento-2/1-install/#disable-two-factor-authentication","text":"php bin/magento module:disable Magento_TwoFactorAuth php bin/magento setup:upgrade","title":"Disable Two factor Authentication"},{"location":"magento-2/1-install/#upgrade-magento-project","text":"cp composer.json composer.json.bak composer require magento/product-community-edition 2 .3.3 --no-update composer update m2 setup:upgrade","title":"Upgrade Magento Project"},{"location":"magento-2/2-configuration/","text":"Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \" Sign Static Files Disable timestamp in static files like pub/static/version12345993943/file.js bash m2 config:set dev/static/sign 0 Magento Admin Stores > Configuration > Advanced > Developer > Static Files Settings > Sign Static Files > No sql INSERT INTO core_config_data ( ` path ` , ` value ` ) VALUES ( 'dev/static/sign' , 0 ) ON DUPLICATE KEY UPDATE ` value ` = VALUES ( value ); General Stores > Configuration > General > Web m2 config:set \"web/cookie/cookie_lifetime\" 31536000 # Default Cookie Settings > Cookie Lifetime m2 config:set \"web/seo/use_rewrites\" 1 # Search Engine Optimization > Use Web Server Rewrites = Yes Stores > Configuration > Mageplaza Extensions > General Configuration m2 config:set \"smtp/general/enabled\" 0 # Enable Mageplaza SMTP = No Set Base URL url = \"prj.com\" && m2 setup:store-config:set --base-url = \"https:// $url /\" --base-url-secure = \"https:// $url /\" --use-secure = 1 --use-secure-admin = 1 && m2 cache:clean Admin Stores > Configuration > Advanced > Admin m2 config:set \"admin/captcha/enable\" 0 # CAPTCHA > Enable CAPTCHA in Admin = No Stores > Configuration > Advanced > Admin > Security m2 config:set \"admin/security/session_lifetime\" 31536000 # Admin Session Lifetime (seconds) m2 config:set \"admin/security/password_lifetime\" \"\" # Password Lifetime (days) m2 config:set \"admin/security/admin_account_sharing\" 1 # Admin Account Sharing = Yes m2 config:set \"admin/security/lockout_failures\" \"\" # Maximum Login Failures to Lockout Account = \"\" m2 config:set \"admin/security/password_is_forced\" 0 # Password Change = \"Recommended\" m2 config:set \"admin/security/use_form_key\" 0 # Add Secret Key to URLs = No CSS/JS Stores > Configuration > Advanced > CSS Settings m2 config:set \"dev/css/merge_css_files\" 0 # Merge CSS Files = No m2 config:set \"dev/css/minify_files\" 0 # Minify CSS Files = No Stores > Configuration > Advanced > JavaScript Settings m2 config:set \"dev/js/merge_files\" 0 # Merge JavaScript Files = No m2 config:set \"dev/js/enable_js_bundling\" 0 # Enable JavaScript Bundling = No m2 config:set \"dev/js/minify_files\" 0 # Minify JavaScript Files = No Debug Template Hints m2 config:set \"dev/debug/template_hints_storefront\" 1 && m2 config:set \"dev/debug/template_hints_blocks\" 1 # enable m2 config:set \"dev/debug/template_hints_storefront\" 0 && m2 config:set \"dev/debug/template_hints_blocks\" 0 # disable Magento Admin Stores > Configuration > Advanced > Developer > Debug > Enabled Template Path Hints for Storefront Stores > Configuration > Advanced > Developer > Debug > Add Block Class Type to Hints Debug Logging m2 setup:config:set --enable-debug-logging = true && m2 cache:flush # enable m2 setup:config:set --enable-debug-logging = false && m2 cache:flush # disable Syslog Logging m2 setup:config:set --enable-syslog-logging = true && m2 cache:flush # enable m2 setup:config:set --enable-syslog-logging = false && m2 cache:flush # disable Database logging m2 dev:query-log:enable && m2 cache:flush cat var/debug/db.log | less m2 dev:query-log:disable && m2 cache:flush","title":"Configuration"},{"location":"magento-2/2-configuration/#sign-static-files","text":"Disable timestamp in static files like pub/static/version12345993943/file.js bash m2 config:set dev/static/sign 0 Magento Admin Stores > Configuration > Advanced > Developer > Static Files Settings > Sign Static Files > No sql INSERT INTO core_config_data ( ` path ` , ` value ` ) VALUES ( 'dev/static/sign' , 0 ) ON DUPLICATE KEY UPDATE ` value ` = VALUES ( value );","title":"Sign Static Files"},{"location":"magento-2/2-configuration/#general","text":"Stores > Configuration > General > Web m2 config:set \"web/cookie/cookie_lifetime\" 31536000 # Default Cookie Settings > Cookie Lifetime m2 config:set \"web/seo/use_rewrites\" 1 # Search Engine Optimization > Use Web Server Rewrites = Yes Stores > Configuration > Mageplaza Extensions > General Configuration m2 config:set \"smtp/general/enabled\" 0 # Enable Mageplaza SMTP = No Set Base URL url = \"prj.com\" && m2 setup:store-config:set --base-url = \"https:// $url /\" --base-url-secure = \"https:// $url /\" --use-secure = 1 --use-secure-admin = 1 && m2 cache:clean","title":"General"},{"location":"magento-2/2-configuration/#admin","text":"Stores > Configuration > Advanced > Admin m2 config:set \"admin/captcha/enable\" 0 # CAPTCHA > Enable CAPTCHA in Admin = No Stores > Configuration > Advanced > Admin > Security m2 config:set \"admin/security/session_lifetime\" 31536000 # Admin Session Lifetime (seconds) m2 config:set \"admin/security/password_lifetime\" \"\" # Password Lifetime (days) m2 config:set \"admin/security/admin_account_sharing\" 1 # Admin Account Sharing = Yes m2 config:set \"admin/security/lockout_failures\" \"\" # Maximum Login Failures to Lockout Account = \"\" m2 config:set \"admin/security/password_is_forced\" 0 # Password Change = \"Recommended\" m2 config:set \"admin/security/use_form_key\" 0 # Add Secret Key to URLs = No","title":"Admin"},{"location":"magento-2/2-configuration/#cssjs","text":"Stores > Configuration > Advanced > CSS Settings m2 config:set \"dev/css/merge_css_files\" 0 # Merge CSS Files = No m2 config:set \"dev/css/minify_files\" 0 # Minify CSS Files = No Stores > Configuration > Advanced > JavaScript Settings m2 config:set \"dev/js/merge_files\" 0 # Merge JavaScript Files = No m2 config:set \"dev/js/enable_js_bundling\" 0 # Enable JavaScript Bundling = No m2 config:set \"dev/js/minify_files\" 0 # Minify JavaScript Files = No","title":"CSS/JS"},{"location":"magento-2/2-configuration/#debug","text":"Template Hints m2 config:set \"dev/debug/template_hints_storefront\" 1 && m2 config:set \"dev/debug/template_hints_blocks\" 1 # enable m2 config:set \"dev/debug/template_hints_storefront\" 0 && m2 config:set \"dev/debug/template_hints_blocks\" 0 # disable Magento Admin Stores > Configuration > Advanced > Developer > Debug > Enabled Template Path Hints for Storefront Stores > Configuration > Advanced > Developer > Debug > Add Block Class Type to Hints Debug Logging m2 setup:config:set --enable-debug-logging = true && m2 cache:flush # enable m2 setup:config:set --enable-debug-logging = false && m2 cache:flush # disable Syslog Logging m2 setup:config:set --enable-syslog-logging = true && m2 cache:flush # enable m2 setup:config:set --enable-syslog-logging = false && m2 cache:flush # disable Database logging m2 dev:query-log:enable && m2 cache:flush cat var/debug/db.log | less m2 dev:query-log:disable && m2 cache:flush","title":"Debug"},{"location":"magento-2/api/","text":"","title":"Api"},{"location":"magento-2/bulk-actions/","text":"Bulk Actions Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \" Trigger processing bulk actions m2 queue:consumers:start product_action_attribute.update --single-thread --max-messages = 10000 Misc Tables: - magento_bulk BO Save product attributes: https://dev.local/admin/catalog/product_action_attribute/save/store/0/active_tab/inventory/","title":"Bulk Actions"},{"location":"magento-2/bulk-actions/#bulk-actions","text":"Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \"","title":"Bulk Actions"},{"location":"magento-2/bulk-actions/#trigger-processing-bulk-actions","text":"m2 queue:consumers:start product_action_attribute.update --single-thread --max-messages = 10000","title":"Trigger processing bulk actions"},{"location":"magento-2/bulk-actions/#misc","text":"Tables: - magento_bulk BO Save product attributes: https://dev.local/admin/catalog/product_action_attribute/save/store/0/active_tab/inventory/","title":"Misc"},{"location":"magento-2/cron/","text":"Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \" Run cron as standalone process: m2 cron:run --group = default --bootstrap = standaloneProcessStarted = 1 Debug Cron Job TRUNCATE ` cron_schedule ` ; INSERT INTO ` cron_schedule ` ( ` job_code ` , ` status ` , ` messages ` , ` created_at ` , ` scheduled_at ` , ` executed_at ` , ` finished_at ` ) VALUES ( 'lengow_connector_launch_export' , 'pending' , NULL , NOW (), NOW (), NULL , NULL ); m2 cache:clean m2x cron:run --group = default --bootstrap = standaloneProcessStarted = 1 Reindex invalid indexers (on schedule mode) TRUNCATE ` cron_schedule ` ; INSERT INTO ` cron_schedule ` ( ` job_code ` , ` status ` , ` messages ` , ` created_at ` , ` scheduled_at ` , ` executed_at ` , ` finished_at ` ) VALUES ( 'indexer_reindex_all_invalid' , 'pending' , NULL , NOW (), NOW (), NULL , NULL ); m2 cron:run --group = index --bootstrap = standaloneProcessStarted = 1 Statistics SELECT date ( scheduled_at ), count ( schedule_id ) AS cnt , SUM ( IF ( executed_at IS NULL , 0 , 1 )) as executed , SUM ( IF ( finished_at IS NULL , 0 , 1 )) as finished FROM ` cron_schedule ` GROUP BY date ( scheduled_at ) ORDER BY ` scheduled_at ` DESC ; Files Magento\\Cron\\Observer\\ProcessCronQueueObserver::execute(Observer $observer) ( view ) Magento\\Cron\\Observer\\ProcessCronQueueObserver::processPendingJobs($groupId, $jobsRoot, $currentTime) ( view )","title":"Cron"},{"location":"magento-2/cron/#run-cron-as-standalone-process","text":"m2 cron:run --group = default --bootstrap = standaloneProcessStarted = 1","title":"Run cron as standalone process:"},{"location":"magento-2/cron/#debug-cron-job","text":"TRUNCATE ` cron_schedule ` ; INSERT INTO ` cron_schedule ` ( ` job_code ` , ` status ` , ` messages ` , ` created_at ` , ` scheduled_at ` , ` executed_at ` , ` finished_at ` ) VALUES ( 'lengow_connector_launch_export' , 'pending' , NULL , NOW (), NOW (), NULL , NULL ); m2 cache:clean m2x cron:run --group = default --bootstrap = standaloneProcessStarted = 1","title":"Debug Cron Job"},{"location":"magento-2/cron/#reindex-invalid-indexers-on-schedule-mode","text":"TRUNCATE ` cron_schedule ` ; INSERT INTO ` cron_schedule ` ( ` job_code ` , ` status ` , ` messages ` , ` created_at ` , ` scheduled_at ` , ` executed_at ` , ` finished_at ` ) VALUES ( 'indexer_reindex_all_invalid' , 'pending' , NULL , NOW (), NOW (), NULL , NULL ); m2 cron:run --group = index --bootstrap = standaloneProcessStarted = 1","title":"Reindex invalid indexers (on schedule mode)"},{"location":"magento-2/cron/#statistics","text":"SELECT date ( scheduled_at ), count ( schedule_id ) AS cnt , SUM ( IF ( executed_at IS NULL , 0 , 1 )) as executed , SUM ( IF ( finished_at IS NULL , 0 , 1 )) as finished FROM ` cron_schedule ` GROUP BY date ( scheduled_at ) ORDER BY ` scheduled_at ` DESC ;","title":"Statistics"},{"location":"magento-2/cron/#files","text":"Magento\\Cron\\Observer\\ProcessCronQueueObserver::execute(Observer $observer) ( view ) Magento\\Cron\\Observer\\ProcessCronQueueObserver::processPendingJobs($groupId, $jobsRoot, $currentTime) ( view )","title":"Files"},{"location":"magento-2/db/","text":"File: vendor/magento/zendframework1/library/Zend/Db/Adapter/Pdo/Abstract.php:223 Breakpoint: false !== strpos('' . $sql, 'cataloginventory_stock_item') && false !== strpos('' . $sql, 'UPDATE')","title":"Db"},{"location":"magento-2/layout/","text":"Add block with html content <referenceContainer name= \"content\" > <block class= \"Magento\\Framework\\View\\Element\\Text\" name= \"my.block.name\" > <arguments> <argument translate= \"true\" name= \"text\" xsi:type= \"string\" > Lorem ipsum dolor ... </argument> </arguments> </block> </referenceContainer> Add content block by id <referenceContainer name= \"content\" > <block class= \"Magento\\Cms\\Block\\Block\" name= \"my.content.block\" > <arguments> <argument name= \"block_id\" xsi:type= \"string\" > my-content-block-id </argument> </arguments> </block> </referenceContainer> Add block to page head section <referenceBlock name= \"head.additional\" > <block class= \"Magento\\Framework\\View\\Element\\Text\" name= \"my.block.name\" template= \"Vendor_Module::template.phtml\" /> </referenceBlock>","title":"Layout"},{"location":"magento-2/layout/#add-block-with-html-content","text":"<referenceContainer name= \"content\" > <block class= \"Magento\\Framework\\View\\Element\\Text\" name= \"my.block.name\" > <arguments> <argument translate= \"true\" name= \"text\" xsi:type= \"string\" > Lorem ipsum dolor ... </argument> </arguments> </block> </referenceContainer>","title":"Add block with html content"},{"location":"magento-2/layout/#add-content-block-by-id","text":"<referenceContainer name= \"content\" > <block class= \"Magento\\Cms\\Block\\Block\" name= \"my.content.block\" > <arguments> <argument name= \"block_id\" xsi:type= \"string\" > my-content-block-id </argument> </arguments> </block> </referenceContainer>","title":"Add content block by id"},{"location":"magento-2/layout/#add-block-to-page-head-section","text":"<referenceBlock name= \"head.additional\" > <block class= \"Magento\\Framework\\View\\Element\\Text\" name= \"my.block.name\" template= \"Vendor_Module::template.phtml\" /> </referenceBlock>","title":"Add block to page head section"},{"location":"magento-2/misc/","text":"Bash Environment Configuration ~/.bashrc.d/env export PS1 = \"\\[\\e[0;38;05;15m\\][\\[\\e[0;38;05;47m\\]\\u\\[\\e[0;38;05;15m\\]@\\[\\e[0;38;05;153m\\]\\h:\\[\\e[0;38;05;111m\\]\\w\\[\\e[0;38;05;15m\\]]\\\\ $ \\[\\e[0m\\]\" alias phpx = 'php -dxdebug.remote_autostart=1' alias m2 = 'php bin/magento' alias m2x = 'phpx bin/magento' alias m2-clean = 'rm -Rf generated/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* && redis-cli FLUSHALL' alias m2-cssclean = \"rm -Rf var/view_preprocessed/* && find pub/static/ -name 'styles-*.css' -exec rm -f {} \\;\" ~/.profile export PATH = \" $HOME /bin: $PATH \" PhpStorm Urn container: m2 dev:urn-catalog:generate .idea/misc.xml host: sed -i \"s|/var/www/myproject|`pwd`|g\" .idea/misc.xml PhpStorm: synchronize root directory & wait 10 seconds. Create module package For Marketplace: git clone https://git.example.com/Vendor_Module.git cd Vendor_Module zip -r9 \"vendor-module-1.0.0.zip\" . -x *.git* *.idea* Alternative way (archive will have a path app/code/Vendor/Module/): zip -r9 \"vendor-module-1.0.0.zip\" app/code/Vendor/Module/ -x *.git* Disable event programmatically use Magento\\Framework\\Event\\Config\\Data; class Foo { public function __construct(Data $eventConfigData) { $this->eventConfigData = $eventConfigData; } protected function disableEventObservers(string $event): void { $observers = $this->eventConfigData->get($event, []); if ($observers) { $observers = array_combine(array_keys($observers), array_fill(0, count($observers), ['disabled' => true])); $this->eventConfigData->merge([$event => $observers]); } } } // usage: $this->disableEventObservers('sales_order_shipment_save_after'); Data Patch Development mysql -e 'DELETE FROM patch_list WHERE patch_name = \"Vendor\\\\Module\\\\Setup\\\\Patch\\\\Data\\\\InitializeStoresAndWebsites\"' && m2x setup:upgrade Recompile m2 = \"php -d memory_limit=-1 bin/magento\" \\ && $m2 maintenance:enable \\ && $m2 cache:clean \\ && rm -Rf generated/code/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* \\ && redis-cli FLUSHALL \\ && $m2 setup:di:compile \\ && $m2 setup:static-content:deploy -t Vendor/default fr_FR en_US \\ && $m2 setup:static-content:deploy -t Magento/backend fr_FR en_US \\ && $m2 maintenance:disable \\ && sudo systemctl restart varnish Bookmarks I : \\Magento\\Framework\\Interception\\Interceptor::___callPlugins - interceptor implementation E : \\Elasticsearch\\Connections\\Connection::performRequest - catch elasticsearch query if (preg_match('/^{\"size\":[^0].*/', (string) $body)) { die('<pre>' . json_encode(json_decode($body, true), JSON_PRETTY_PRINT)); } 2.1. \\Smile\\ElasticsuiteVirtualCategory\\Model\\Rule::getChildrenCategories M : \\Zend_Db_Adapter_Pdo_Abstract::query - catch MySQL query P : \\Magento\\Catalog\\Pricing\\Price\\FinalPrice - catalog final price R : \\Magento\\Framework\\HTTP\\PhpEnvironment\\Response::setHttpResponseCode - show does redirect, set break point here to find out. Useful Links Magento\\CatalogInventory\\Model\\StockStateProvider::checkQty(StockItemInterface $stockItem, $qty) ( view ) Magento\\PageCache\\Observer\\FlushCacheByTags::execute(Observer $observer) ( view ) Magento\\Framework\\App\\Request\\CsrfValidator Quote \\Magento\\Quote\\Model\\Quote\\Item\\Processor::prepare \\Magento\\Tax\\Model\\Sales\\Total\\Quote\\CommonTaxCollector::updateItemTaxInfo Test or style the Order Success Page or how to stop Success Page redirecting","title":"Misc"},{"location":"magento-2/misc/#phpstorm-urn","text":"container: m2 dev:urn-catalog:generate .idea/misc.xml host: sed -i \"s|/var/www/myproject|`pwd`|g\" .idea/misc.xml PhpStorm: synchronize root directory & wait 10 seconds.","title":"PhpStorm Urn"},{"location":"magento-2/misc/#create-module-package","text":"For Marketplace: git clone https://git.example.com/Vendor_Module.git cd Vendor_Module zip -r9 \"vendor-module-1.0.0.zip\" . -x *.git* *.idea* Alternative way (archive will have a path app/code/Vendor/Module/): zip -r9 \"vendor-module-1.0.0.zip\" app/code/Vendor/Module/ -x *.git*","title":"Create module package"},{"location":"magento-2/misc/#disable-event-programmatically","text":"use Magento\\Framework\\Event\\Config\\Data; class Foo { public function __construct(Data $eventConfigData) { $this->eventConfigData = $eventConfigData; } protected function disableEventObservers(string $event): void { $observers = $this->eventConfigData->get($event, []); if ($observers) { $observers = array_combine(array_keys($observers), array_fill(0, count($observers), ['disabled' => true])); $this->eventConfigData->merge([$event => $observers]); } } } // usage: $this->disableEventObservers('sales_order_shipment_save_after');","title":"Disable event programmatically"},{"location":"magento-2/misc/#data-patch-development","text":"mysql -e 'DELETE FROM patch_list WHERE patch_name = \"Vendor\\\\Module\\\\Setup\\\\Patch\\\\Data\\\\InitializeStoresAndWebsites\"' && m2x setup:upgrade","title":"Data Patch Development"},{"location":"magento-2/misc/#recompile","text":"m2 = \"php -d memory_limit=-1 bin/magento\" \\ && $m2 maintenance:enable \\ && $m2 cache:clean \\ && rm -Rf generated/code/* var/cache/* var/page_cache/* var/di/* var/view_preprocessed/* pub/static/* \\ && redis-cli FLUSHALL \\ && $m2 setup:di:compile \\ && $m2 setup:static-content:deploy -t Vendor/default fr_FR en_US \\ && $m2 setup:static-content:deploy -t Magento/backend fr_FR en_US \\ && $m2 maintenance:disable \\ && sudo systemctl restart varnish","title":"Recompile"},{"location":"magento-2/misc/#bookmarks","text":"I : \\Magento\\Framework\\Interception\\Interceptor::___callPlugins - interceptor implementation E : \\Elasticsearch\\Connections\\Connection::performRequest - catch elasticsearch query if (preg_match('/^{\"size\":[^0].*/', (string) $body)) { die('<pre>' . json_encode(json_decode($body, true), JSON_PRETTY_PRINT)); } 2.1. \\Smile\\ElasticsuiteVirtualCategory\\Model\\Rule::getChildrenCategories M : \\Zend_Db_Adapter_Pdo_Abstract::query - catch MySQL query P : \\Magento\\Catalog\\Pricing\\Price\\FinalPrice - catalog final price R : \\Magento\\Framework\\HTTP\\PhpEnvironment\\Response::setHttpResponseCode - show does redirect, set break point here to find out.","title":"Bookmarks"},{"location":"magento-2/misc/#useful-links","text":"Magento\\CatalogInventory\\Model\\StockStateProvider::checkQty(StockItemInterface $stockItem, $qty) ( view ) Magento\\PageCache\\Observer\\FlushCacheByTags::execute(Observer $observer) ( view ) Magento\\Framework\\App\\Request\\CsrfValidator Quote \\Magento\\Quote\\Model\\Quote\\Item\\Processor::prepare \\Magento\\Tax\\Model\\Sales\\Total\\Quote\\CommonTaxCollector::updateItemTaxInfo Test or style the Order Success Page or how to stop Success Page redirecting","title":"Useful Links"},{"location":"magento-2/ng98/","text":"Installation wget https://files.magerun.net/n98-magerun2.phar -O ~/bin/ng98 # ~/bin/ must be in $PATH chmod +x ~/bin/ng98 more info: https://github.com/netz98/n98-magerun2 Usage n98 config:store:get --decrypt path/a/b/c # get and decrypt value n98 config:store:set --encrypt path/a/b/c value # encrypt and set value","title":"Ng98"},{"location":"magento-2/ng98/#installation","text":"wget https://files.magerun.net/n98-magerun2.phar -O ~/bin/ng98 # ~/bin/ must be in $PATH chmod +x ~/bin/ng98 more info: https://github.com/netz98/n98-magerun2","title":"Installation"},{"location":"magento-2/ng98/#usage","text":"n98 config:store:get --decrypt path/a/b/c # get and decrypt value n98 config:store:set --encrypt path/a/b/c value # encrypt and set value","title":"Usage"},{"location":"magento-2/ui/","text":"M2JS Magento 2 UI custom debug functions: uii (ui info) and uiq (ui query). Install a Browser Plugin to include additional JS like User JavaScript and CSS Include external JS Library: https://yutv.github.io/kb/js/m2.js Open Developer Tools (F12), the following functions should be available: uiq (); // list of UI components on the page uii (); // information about UI Component Usage Examples: uiq() - show all ui components on the page. uiq('shipping-step') - show ui components which have shipping-step in the name. Inspect a DOM Element using the Developer Tools (F12) and run the uii() . It will output information about knockout view model attached to the selected DOM element. uii('#my-element-id') - show ko view model attached to the DOM element with given selector. Misc Show knockout model associates with DOM node require ( 'ko' ). dataFor ( document . querySelector ( '.totals.shipping.excl' )); Debug when shipping/billing address and shipping method changed if ( window . checkoutConfig ) { require ([ 'Magento_Checkout/js/model/quote' ], function ( quote ){ var getAddress = function ( address ) { if ( ! address ) { return address ; } var result = ( ! address . street ) ? address . street : address . street [ 0 ]; result += ', ' + address . countryId ; return result ; } quote . billingAddress . subscribe ( function ( address ){ console . groupCollapsed ( 'billingAddress: ' + getAddress ( address )); console . info ( address ); console . trace (); console . groupEnd (); }); quote . shippingAddress . subscribe ( function ( address ){ console . groupCollapsed ( 'shippingAddress: ' + getAddress ( address )); console . info ( address ); console . trace () console . groupEnd (); }); quote . shippingMethod . subscribe ( function ( shippingMethod ){ console . groupCollapsed ( 'shippingMethod: ' + shippingMethod ? . carrier_code + '_' + shippingMethod ? . method_code ); console . info ( shippingMethod ); console . trace (); console . groupEnd (); }); }); } Observe DOM Node Attribute Mutation window . addEventListener ( 'DOMContentLoaded' , () => { const targetNode = document . querySelector ( '#payment_fr_express_checkout_other_express_checkout_required_enable_express_checkout' ); if ( ! targetNode ) { return ; } const config = { attributes : true , childList : true , subtree : true }; const callback = function ( mutationsList , observer ) { for ( let mutation of mutationsList ) { console . groupCollapsed ( 'mutation[' + mutation . type + ']: ' + mutation . attributeName ); console . log ( mutation ); console . trace () console . groupEnd (); } }; const observer = new MutationObserver ( callback ); observer . observe ( targetNode , config ); }); jQuery Change Event Observer Position var element = document . getElementById ( '#element' ), element . on ( 'click' , this . onClick . bind ( this )); # add on click observer observer = $ . _data ( element , 'events' ). click . pop (); # remove the last observer $ . _data ( element , 'events' ). click . unshift ( observer ); # insert it to the beginning Show message on early stage define ([ 'uiElement' ], function ( Element ) { 'use strict' ; return Element . extend ({ defaults : { msgError : 'Some error message' , modules : { messages : 'messages' } }, initialize : function () { this . _super (); this . showError ( this . msgError ); }, showError : function ( text ) { this . messages ( function ( component ) { var data = component . messages (); data . messages = data . messages || []; data . messages . push ({ text : text , type : 'error' }); component . messages ( data ); }); } }); }); jQuery Validate custom message < input type = \"text\" name = \"firstname\" data-validate = '{\"required\":true}' data-msg-required = \"Please introduce yourself\" /> https://magento.stackexchange.com/questions/163585/magento-2-how-to-set-custom-validation-message Files mage/common.js on form submit automatically adds form_key input if missed. block-loader.js when use it with jquery.validate.js keep in mind it disables form fields.","title":"Ui"},{"location":"magento-2/ui/#m2js","text":"Magento 2 UI custom debug functions: uii (ui info) and uiq (ui query). Install a Browser Plugin to include additional JS like User JavaScript and CSS Include external JS Library: https://yutv.github.io/kb/js/m2.js Open Developer Tools (F12), the following functions should be available: uiq (); // list of UI components on the page uii (); // information about UI Component Usage Examples: uiq() - show all ui components on the page. uiq('shipping-step') - show ui components which have shipping-step in the name. Inspect a DOM Element using the Developer Tools (F12) and run the uii() . It will output information about knockout view model attached to the selected DOM element. uii('#my-element-id') - show ko view model attached to the DOM element with given selector.","title":"M2JS"},{"location":"magento-2/ui/#misc","text":"","title":"Misc"},{"location":"magento-2/ui/#show-knockout-model-associates-with-dom-node","text":"require ( 'ko' ). dataFor ( document . querySelector ( '.totals.shipping.excl' ));","title":"Show knockout model associates with DOM node"},{"location":"magento-2/ui/#debug-when-shippingbilling-address-and-shipping-method-changed","text":"if ( window . checkoutConfig ) { require ([ 'Magento_Checkout/js/model/quote' ], function ( quote ){ var getAddress = function ( address ) { if ( ! address ) { return address ; } var result = ( ! address . street ) ? address . street : address . street [ 0 ]; result += ', ' + address . countryId ; return result ; } quote . billingAddress . subscribe ( function ( address ){ console . groupCollapsed ( 'billingAddress: ' + getAddress ( address )); console . info ( address ); console . trace (); console . groupEnd (); }); quote . shippingAddress . subscribe ( function ( address ){ console . groupCollapsed ( 'shippingAddress: ' + getAddress ( address )); console . info ( address ); console . trace () console . groupEnd (); }); quote . shippingMethod . subscribe ( function ( shippingMethod ){ console . groupCollapsed ( 'shippingMethod: ' + shippingMethod ? . carrier_code + '_' + shippingMethod ? . method_code ); console . info ( shippingMethod ); console . trace (); console . groupEnd (); }); }); }","title":"Debug when shipping/billing address and shipping method changed"},{"location":"magento-2/ui/#observe-dom-node-attribute-mutation","text":"window . addEventListener ( 'DOMContentLoaded' , () => { const targetNode = document . querySelector ( '#payment_fr_express_checkout_other_express_checkout_required_enable_express_checkout' ); if ( ! targetNode ) { return ; } const config = { attributes : true , childList : true , subtree : true }; const callback = function ( mutationsList , observer ) { for ( let mutation of mutationsList ) { console . groupCollapsed ( 'mutation[' + mutation . type + ']: ' + mutation . attributeName ); console . log ( mutation ); console . trace () console . groupEnd (); } }; const observer = new MutationObserver ( callback ); observer . observe ( targetNode , config ); });","title":"Observe DOM Node Attribute Mutation"},{"location":"magento-2/ui/#jquery-change-event-observer-position","text":"var element = document . getElementById ( '#element' ), element . on ( 'click' , this . onClick . bind ( this )); # add on click observer observer = $ . _data ( element , 'events' ). click . pop (); # remove the last observer $ . _data ( element , 'events' ). click . unshift ( observer ); # insert it to the beginning","title":"jQuery Change Event Observer Position"},{"location":"magento-2/ui/#show-message-on-early-stage","text":"define ([ 'uiElement' ], function ( Element ) { 'use strict' ; return Element . extend ({ defaults : { msgError : 'Some error message' , modules : { messages : 'messages' } }, initialize : function () { this . _super (); this . showError ( this . msgError ); }, showError : function ( text ) { this . messages ( function ( component ) { var data = component . messages (); data . messages = data . messages || []; data . messages . push ({ text : text , type : 'error' }); component . messages ( data ); }); } }); });","title":"Show message on early stage"},{"location":"magento-2/ui/#jquery-validate","text":"","title":"jQuery Validate"},{"location":"magento-2/ui/#custom-message","text":"< input type = \"text\" name = \"firstname\" data-validate = '{\"required\":true}' data-msg-required = \"Please introduce yourself\" /> https://magento.stackexchange.com/questions/163585/magento-2-how-to-set-custom-validation-message","title":"custom message"},{"location":"magento-2/ui/#files","text":"mage/common.js on form submit automatically adds form_key input if missed. block-loader.js when use it with jquery.validate.js keep in mind it disables form fields.","title":"Files"}]}